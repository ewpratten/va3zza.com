<!DOCTYPE html>
<html lang="en">

<head>
    



    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-KFJ95RP');</script>
    <!-- End Google Tag Manager -->

    

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/jpg" href="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;21065412" />
    
    <link rel="canonical" href="https:&#x2F;&#x2F;ewpratten.com&#x2F;blog&#x2F;buildingimgfrombin&#x2F;" />
    

    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://ewpratten.com/ rss.xml">
    <link rel="webmention" href="https://webmention.io/ewpratten.com/webmention" />
    <link rel="pingback" href="https://webmention.io/ewpratten.com/xmlrpc" />

    <title>
Building images from binary data
 | Evan Pratten</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Urbanist:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://maxst.icons8.com">
    <link rel="stylesheet"
        href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    <link rel="stylesheet" href="/styles/layout.css">
    <link rel="stylesheet" href="/styles/project_mosaic.css">


    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css"
        integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />


    <meta name="twitter:card" content="summary" />
    <meta name="og:site" content="ewpratten.com" />
    <meta name="og:image" content="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;21065412" />
    <meta name="twitter:creator" content="@ewpratten">
    <meta name="og:site_name" content="Evan Pratten (VA3ZZA)" />

    






<meta property="og:title" content="Building images from binary data - Evan Pratten" />
<meta property="og:type" content="article" />

<meta property="og:description" content="Simple, yet fun" />
<meta property="description" content="Simple, yet fun" />

<meta property="article:published_time" content="2019-09-11T00:00:00" />









<script type="application/ld+json">
    
    
    
    {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "url": "https://ewpratten.com/blog/buildingimgfrombin/",
    "headline": "Building images from binary data",
    "dateCreated": "2019-09-11T00:00:00",
    "datePublished": "2019-09-11T00:00:00",
    "dateModified": "2019-09-11T00:00:00",
    "inLanguage": "en-CA",
    "isFamilyFriendly": "true",
    "accountablePerson": {
        "@type": "Person",
        "name": "Evan Pratten",
        "url": "https://ewpratten.com"
    },
    "author": {
        "@type": "Person",
        "name": "Evan Pratten",
        "url": "https://ewpratten.com"
    },
    "creator": {
        "@type": "Person",
        "name": "Evan Pratten",
        "url": "https://ewpratten.com"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Evan Pratten",
        "url": "https://ewpratten.com",
        "logo": {
            "@type": "ImageObject",
            "url": "https://avatars.githubusercontent.com/u/21065412",
            "width": "460",
            "height": "460"
        }
    },
    "mainEntityOfPage": "True",
    "keywords": [],
    "genre": [],
    "articleSection": "Blog Post",
    "__articleBody__": "{{content}}"
}
</script>






</head>

<body>
    <div class="container">
        <div class="profile-card">
            
<div class="row">
    <div class="headshot-container">
        <img src="https:&#x2F;&#x2F;avatars.githubusercontent.com&#x2F;u&#x2F;21065412" alt="Headshot" style="height:50px;width:auto;">
    </div>
    <div class="text-container">
        <h1>Evan Pratten</h1>
        <p>
            Software Developer
        </p>
    </div>
</div>

        </div>
        <div class="navigation-bar">
            <hr>
            <p>
                <a href="/">Home</a> |
                <a href="/blog">Blog</a> |
                
                
                
                <a href="/contact">Contact</a>
                
                
                
            </p>
            <hr>
        </div>
        <div class="page-content">
            
<br><br>
<article class="markdown-body">
    
    <h1 style="border:none;margin-bottom:0;padding-bottom:0">Building images from binary data</h1>
    <h3 style="margin-top:0;color:gray;padding-bottom:.3em;border-bottom:1px solid #eaecef;">
        <em>
            <span style="color:rgb(186, 186, 186)">/*</span>
            Simple, yet fun
            <span style="color:rgb(186, 186, 186)">*/</span>
        </em>
    </h3>
    
    <div style="text-align: justify;">
        <p>During a computer science class today, we were talking about embedding code and metadata in <em>jpg</em> and <em>bmp</em> files. @exvacuum was showing off a program he wrote that watched a directory for new image files, and would display them on a canvas. He then showed us a special image. In this image, he had injected some metadata into the last few pixels, which were not rendered, but told his program where to position the image on the canvas, and it's size.</p>
<p>This demo got @hyperliskdev and I thinking about what else we can do with image data. After some talk, the idea of converting application binaries to images came up. I had seen a blog post about visually decoding <a rel="noopener" target="_blank" href="https://en.wikipedia.org/wiki/On%E2%80%93off_keying">OOK data</a> by converting an <a rel="noopener" target="_blank" href="http://www.ni.com/tutorial/4805/en/">IQ capture</a> to an image. With a little adaptation, I did the same for a few binaries on my laptop.</p>
<!-- Tweet embed -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I present: &quot;Parts of <a href="https://twitter.com/GIMP_Official?ref_src=twsrc%5Etfw">@GIMP_Official</a>&#39;s binary, represented as a bitmap&quot; <a href="https://t.co/iLljdE4nlK">pic.twitter.com/iLljdE4nlK</a></p>&mdash; Evan Pratten (@ewpratten) <a href="https://twitter.com/ewpratten/status/1171801959197794304?ref_src=twsrc%5Etfw">September 11, 2019</a></blockquote> 
<h2 id="program-design">Program design</h2>
<p>Like all ideas I have, I wrote some code to test this idea out. Above is a small sample of the interesting designs found in the <a rel="noopener" target="_blank" href="https://www.gimp.org/">gimp</a> binary. The goals for this script were to:</p>
<ul>
<li>Accept any file of any type or size</li>
<li>Allow the user to select the file dimensions</li>
<li>Generate an image</li>
<li>Write the data in a common image format</li>
</ul>
<p>If you would like to see how the code works, read &quot;<em>check out the script</em>&quot;.</p>
<h2 id="a-note-on-data-wrapping">A note on data wrapping</h2>
<p>By using a <a rel="noopener" target="_blank" href="https://wiki.python.org/moin/Generators">generator</a>, and the <a rel="noopener" target="_blank" href="https://docs.python.org/3/library/functions.html#func-range">range function</a>'s 3rd argument, any list can be easily split into a 2d list at a set interval.</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#65737e;"># Assuming l is a list of data, and n is an int that denotes the desired split location
</span><span style="color:#b48ead;">for </span><span>i </span><span style="color:#b48ead;">in </span><span style="color:#96b5b4;">range</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#96b5b4;">len</span><span>(l), n):
</span><span>    </span><span style="color:#b48ead;">yield </span><span>l[i:i + n]
</span></code></pre>
<h3 id="binaries-have-a-habit-of-not-being-rectangular">Binaries have a habit of not being rectangular</h3>
<p>Unlike photos, binaries are not generated from rectangular image sensors, but instead from compilers and assemblers (and sometimes hand-written binary). These do not generate perfect rectangles. Due to this, my script simply removes the last line from the image to &quot;reshape&quot; it. I may end up adding a small piece of code to pad the final line instead of stripping it in the future.</p>
<h2 id="other-file-types">Other file types</h2>
<p>I also looked at other file types. Binaries are very interesting because they follow very strict ordering rules. I was hoping that a <code>wav</code> file would do something similar, but that does not appear to be the case. This is the most interesting pattern I could find in a <code>wav</code> file:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Following up my previous post with a tiny segment of an audio file. This one is little less interesting <a href="https://t.co/u9EFloxnK5">pic.twitter.com/u9EFloxnK5</a></p>&mdash; Evan Pratten (@ewpratten) <a href="https://twitter.com/ewpratten/status/1171883910827040774?ref_src=twsrc%5Etfw">September 11, 2019</a></blockquote> 
<p>Back to executable data, these are small segments of a <code>dll</code> file:</p>
<p><img src="/images/posts/bin-images/dll.png" alt="Segment 1" /></p>
<p><img src="/images/posts/bin-images/dll2.png" alt="Segment 2" /></p>
<h2 id="check-out-the-script">Check out the script</h2>
<p>This script is hosted <a rel="noopener" target="_blank" href="https://github.com/Ewpratten/binmap">on my GitHub account</a> as a standalone file. Any version of python3 should work, but the following libraries are needed:</p>
<ul>
<li>Pillow</li>
<li>Numpy</li>
</ul>

    </div>

    
    
    <br>
    <hr>
    <script src="https://utteranc.es/client.js" repo="ewpratten/va3zza.com" issue-term="title" label="comment"
        theme="github-light" crossorigin="anonymous" async>
        </script>
    

</article>


<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>



        </div>

        <div id="footer">
            <p class="gray">-- EOF --</p>
            <p>
                <em>
                    <a href="https://github.com/ewpratten/va3zza.com"><i class="lab la-github"></i></a>
                    <a href="https://status.ewpratten.com"><i class="las la-info-circle"></i></a>
                    <a href="/rss.xml"><i class="las la-rss"></i></a><br>

                    Thanks for reading :)<br>
                    Site design & content by: <a href="/info">Evan Pratten</a><br>
                    Consider <a href="/donate" target="_blank">supporting my work</a> if you like what you see<br>

                </em>
            </p>
        </div>
    </div>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5912H4H03P"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-5912H4H03P');
    </script>

    <script>
        if (window.performance && performance.getEntriesByType) { // avoid error in Safari 10, IE9- and other old browsers
            let navTiming = performance.getEntriesByType('navigation')
            if (navTiming.length > 0) { // still not supported as of Safari 14...
                let serverTiming = navTiming[0].serverTiming
                if (serverTiming && serverTiming.length > 0) {
                    for (let i = 0; i < serverTiming.length; i++) {
                        if (serverTiming[i].name == 'source') {
                            if (serverTiming[i].description == 'net44') {
                                document.getElementById('ampr-notice').style.display = 'block';
                            }
                        }
                    }
                }
            }
        }
    </script>

    
    <script>
        if (window.location.hostname == 'retrylife.ca') {
            window.location.href = window.location.href.replace('retrylife.ca', 'ewpratten.com');
        }
    </script>

    
    <a rel="me" href="https://social.ewpratten.com/@evan" style="display:none;"></a>
</body>

</html>